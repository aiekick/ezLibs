#include <ezlibs/ezCnt.hpp>
#include <ezlibs/ezCTest.hpp>
#include <string>

// Desactivation des warnings de conversion
#ifdef _MSC_VER
#pragma warning(push)
#pragma warning(disable : 4244)  // Conversion from 'double' to 'float', possible loss of data
#pragma warning(disable : 4305)  // Truncation from 'double' to 'float'
#elif defined(__GNUC__) || defined(__clang__)
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wconversion"
#pragma GCC diagnostic ignored "-Wfloat-conversion"
#endif

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

bool TestEzCnt_Generic() {
    return true;
}

bool TestEzCnt_OneTypename() {
    ez::cnt::DicoVector<std::string> dico;
    CTEST_ASSERT(dico.tryAdd("toto") == true);
    CTEST_ASSERT(dico.tryAdd("toto", "tata") == false);
    CTEST_ASSERT(dico.trySetExisting("toto", "tata") == true);
    return true;
}

bool TestEzCnt_TwoTypename() {
    ez::cnt::DicoVector<std::string, int32_t> dico;
    CTEST_ASSERT(dico.tryAdd("toto", 2));
    return true;
}

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

#define IfTestExist(v)            \
    if (vTest == std::string(#v)) \
    return v()

bool TestEzCnt(const std::string& vTest) {
    IfTestExist(TestEzCnt_Generic);
    else IfTestExist(TestEzCnt_OneTypename);
    else IfTestExist(TestEzCnt_TwoTypename);
    return false;
}

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

#ifdef _MSC_VER
#pragma warning(pop)
#elif defined(__GNUC__) || defined(__clang__)
#pragma GCC diagnostic pop
#endif

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
